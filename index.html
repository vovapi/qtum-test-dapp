<html>
    <header><title>Example test app</title></header>
    <script src="bundle.js" type='text/javascript'></script>
    <body>
    <h1>Address</h1>
    <p id=address> address</p>
    <h1>Name</h1>
    <p id=name> name</p>
    <h1>Network</h1>
    <p id=network> network</p>
    <h1>Balance</h1>
    <p id=balance> balance</p>
    
    <script>
    function send(form) {
        // sendtocontract
        let contract = document.getElementById('contract').value;
        let data = document.getElementById('data').value;
        let amount = document.getElementById('amount').value;
        window.Qweb3Client.provider.rawCall('sendtocontract', [contract, data, amount]);

        // Handle incoming messages
        function handleMessage(message) {
        if (message.data.target == 'qrypto-inpage') {
            // result: object
            // error: string
            const { result, error } = message.data.message.payload;
            
            if (error) {
                if (error === 'Not logged in. Please log in to Qrypto first.') {
                    // Show an alert dialog that the user needs to login first
                    alert(error);
                } else {
                    // Handle different error than not logged in...
                }
                return;
            }
            console.log("result", result)
            // Do something with the message result...
        }
        }
        window.addEventListener('message', handleMessage, false);
        return false;
    }</script>

    <form onsubmit="return send(this)">
        <p>Contract: <input id="contract" type="text" value="49a941c5259e4e6ef9ac4a2a6716c1717ce0ffb6"></p>
        <p>Data: <input id="data" type="text" value="d0821b0e0000000000000000000000000000000000000000000000000000000000000001"></p>
        <p>Amount: <input id="amount" type="text" value="1"></p>
        <input type="submit">
    </form>
    </body>
</html>